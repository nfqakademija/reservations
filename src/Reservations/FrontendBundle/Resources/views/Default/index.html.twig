{% extends '::base.html.twig' %}

{% block title %}Akcijos{% endblock %}

{% block body %}
    <div id="container">
        <div id="search">
            <form class="form-horizontal" action="{{ path('reservations_core_homepage') }}" method="post">
                <div class="input-group">
                    {{ form_widget(form.name) }}
                    {{ form_errors(form.name) }}
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary btn-lg"><span class="glyphicon glyphicon-search"></span> Ieškoti</button>
                    </span>
                </div><!-- /input-group -->
                {{ form_widget(form._token) }}
            </form>
            {% if bars is empty %}
                <div class="alert alert-danger" role="alert" data-dismiss="alert">
                    Nėra
                    <button type="button" class="close" data-dismiss="alert">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                </div>
            {% endif %}
        </div>
        <div id="map"></div>
    </div>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        var map;
        $(document).ready(function(){
            map = new GMaps({
                div: '#map',
                lat: 54.9010005,
                lng: 23.8988132
            });
            {% for bar in bars %}
            map.addMarker({ lat: {{ bar.lat }}, lng: {{ bar.lng }}, title: '{{ bar.name }}',
                infoWindow: {
                    content: '{{ bar.name }}'
                }
            });
            {% endfor %}
        });
    </script>
{% endblock %}
